{"mappings":"oeACA,IAAAA,EAAAC,EAAA,S,uCAKA,MAAMC,EAAgBC,SAASC,cAAc,qBACvCC,EAAeF,SAASC,cAAc,oBAGtCE,EAAQH,SAASC,cAAc,sBAIrC,IAAIG,EAKJ,SAASC,EAAkBC,GACzB,GACEC,aAAaC,QAAQF,IACrBG,KAAKC,MAAMH,aAAaC,QAAQF,IAAUK,OAAS,EAEnD,OAAO,EAGX,SAASC,IACPR,EAAiB,UACbC,EAAkB,YACpBQ,EAAuB,WACvBd,WAAee,UAAUC,IAAI,cAC7Bb,WAAcY,UAAUE,OAAO,eAC/B,EAAAC,EAAAC,QAAM,KAENC,IACAtB,EAAAuB,OAAOC,QAAQ,+BAInB,SAASC,IACPlB,EAAiB,SACbC,EAAkB,WACpBQ,EAAuB,UACvBd,WAAee,UAAUE,OAAO,cAChCd,WAAcY,UAAUC,IAAI,eAC5B,EAAAE,EAAAC,QAAM,KAENC,IACAtB,EAAAuB,OAAOC,QAAQ,2CAiBnB,SAASF,IACHhB,IACFA,EAAMoB,UACJ,6EAyDC,SAASV,EAAuBP,GAChCH,GAASC,IAAmBE,IAC7BD,EAAkBC,GACpBH,EAAMoB,UAAYd,KAAKC,MAAMH,aAAaC,QAAQF,IAC/CkB,KACC,EAACC,GAAEA,EAAEC,MAAEA,EAAKC,YAAEA,EAAWC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,MAClD,MAAMC,EAsBhB,SAA0BC,GACxB,IAAIC,EAAcC,EAAAC,OAAOC,QAAO,CAACC,GAAKZ,GAAEA,EAAEa,KAAEA,MACtCN,EAAQO,SAASd,IACnBY,EAAIG,KAAKF,GAEJD,IACN,IACCJ,EAAYtB,OAAS,IACvBsB,EAAcA,EAAYQ,MAAM,EAAG,GACnCR,EAAYO,KAAK,UAEnB,OAAOP,EAjCyBS,CAAiBd,GAAWe,KAAK,MAEzD,MAAO,+BAA+BlB,0CADrBE,EAAc,kCAAkCA,IAAgB,sGAErCD,oFAEtBA,6EAEIK,8CACDD,EAAaW,MAAM,EAAG,iDACpBZ,EAAae,QAAQ,qEAOnDD,KAAK,IAERxB,KAvIJ0B,OAAOC,iBAAiB,oBAsCxB,WAEE,OADA,EAAAC,EAAAC,eACI3C,EAAkB,WACbO,IAGLP,EAAkB,UACbiB,IAGFH,OA/CTpB,WAAe+C,iBAAiB,QAASlC,GACzCV,WAAc4C,iBAAiB,QAASxB","sources":["src/js/myLibrary.js"],"sourcesContent":["// import { modal } from './modal';\nimport { Notify } from 'notiflix';\nimport { genres } from '../genres.json';\nimport { modal } from './modal';\nimport { fonNightDay } from './fonNightDay';\n\nconst libWatchedBtn = document.querySelector('#lib__watched-btn');\nconst libQueuedBtn = document.querySelector('#lib__queued-btn');\n// const watchedFilms = localStorage.getItem('Watched');\n// const queuedFilms = localStorage.getItem('Queued');\nconst cards = document.querySelector('.library-container');\n\n// const watchedFilmsArray = JSON.parse(watchedFilms);\n// const queuedFilmsArray = JSON.parse(queuedFilms);\nlet currentLibrery;\nwindow.addEventListener('DOMContentLoaded', onPageLoad);\nlibWatchedBtn?.addEventListener('click', onWatchedBtnClick);\nlibQueuedBtn?.addEventListener('click', onQueuedBtnClick);\n\nfunction isLibreryNotEmpty(librery) {\n  if (\n    localStorage.getItem(librery) &&\n    JSON.parse(localStorage.getItem(librery)).length > 0\n  )\n    return true;\n}\n\nfunction onWatchedBtnClick() {\n  currentLibrery = 'Watched';\n  if (isLibreryNotEmpty('Watched')) {\n    renderFilmsFromStorage('Watched');\n    libWatchedBtn?.classList.add('active_btn');\n    libQueuedBtn?.classList.remove('active_btn');\n    modal(true);\n  } else {\n    renderEmptyLibrary();\n    Notify.warning('You have no watched films!');\n  }\n}\n\nfunction onQueuedBtnClick() {\n  currentLibrery = 'Queued';\n  if (isLibreryNotEmpty('Queued')) {\n    renderFilmsFromStorage('Queued');\n    libWatchedBtn?.classList.remove('active_btn');\n    libQueuedBtn?.classList.add('active_btn');\n    modal(true);\n  } else {\n    renderEmptyLibrary();\n    Notify.warning('You have no films in your watch queue!');\n  }\n}\n\nfunction onPageLoad() {\n  fonNightDay();\n  if (isLibreryNotEmpty('Watched')) {\n    return onWatchedBtnClick();\n  }\n\n  if (isLibreryNotEmpty('Queued')) {\n    return onQueuedBtnClick();\n  }\n\n  return renderEmptyLibrary();\n}\n\nfunction renderEmptyLibrary() {\n  if (cards)\n    cards.innerHTML =\n      '<p class=\"lib__empty-placeholder\">Oops! There is no films here yet:-(</p>';\n}\n\n// export function renderWatchedFilmsFromStorage() {\n//   if (!cards || currentLibrery !== 'Watched') return;\n//   if (isLibreryNotEmpty('Watched')) {\n//     cards.innerHTML = JSON.parse(localStorage.getItem('Watched'))\n//       .map(\n//         ({ id, title, poster_path, genre_ids, vote_average, release_date }) => {\n//           const filmsGenresList = getfilmsGenresUl(genre_ids).join(', ');\n//           return `<div class=\"movie__card\" id=${id}>\n//     <img class=\"movie__poster\" src=https://image.tmdb.org/t/p/w500${poster_path} alt=\"${title}\">\n//     <div class=\"movie__info\">\n//        <p class=\"movie__name\">${title}</p>\n//       <div class=\"movie__data\">\n//        <span class=\"movie__genre\">${filmsGenresList}</span>\n//        <span class=\"movie__year\">${release_date.slice(0, 4)}</span>\n//        <span class=\"movie__rating\">${vote_average.toFixed(1)}</span>\n//        </div>\n//        </div>\n//        </div>\n//        `;\n//         }\n//       )\n//       .join('');\n//   } else {\n//     renderEmptyLibrary();\n//   }\n// }\n\n// export function renderQueuedFilmsFromStorage() {\n//   if (!cards || currentLibrery !== 'Queued') return;\n//   if (isLibreryNotEmpty('Queued')) {\n//     cards.innerHTML = JSON.parse(localStorage.getItem('Queued'))\n//       .map(\n//         ({ id, title, poster_path, genre_ids, vote_average, release_date }) => {\n//           const filmsGenresList = getfilmsGenresUl(genre_ids).join(', ');\n//           return `<div class=\"movie__card\" id=${id}>\n//     <img class=\"movie__poster\" src=https://image.tmdb.org/t/p/w500${poster_path} alt=\"${title}\">\n//     <div class=\"movie__info\">\n//        <p class=\"movie__name\">${title}</p>\n//       <div class=\"movie__data\">\n//        <span class=\"movie__genre\">${filmsGenresList}</span>\n//        <span class=\"movie__year\">${release_date.slice(0, 4)}</span>\n//        <span class=\"rating\">${vote_average.toFixed(1)}</span>\n//        </div>\n//        </div>\n//        </div>\n//        `;\n//         }\n//       )\n//       .join('');\n//   } else {\n//     renderEmptyLibrary();\n//   }\n// }\n\nexport function renderFilmsFromStorage(librery) {\n  if (!cards || currentLibrery !== librery) return;\n  if (isLibreryNotEmpty(librery)) {\n    cards.innerHTML = JSON.parse(localStorage.getItem(librery))\n      .map(\n        ({ id, title, poster_path, genre_ids, vote_average, release_date }) => {\n          const filmsGenresList = getfilmsGenresUl(genre_ids).join(', ');\n          const imageUrl = poster_path ? `https://image.tmdb.org/t/p/w500${poster_path}` : 'https://placehold.jp/aaabb1/ffffff/395x574.png?text=This%20movie%20has%20no%20poster%20%3A(';\n          return `<div class=\"movie__card\" id=${id}>\n    <img class=\"movie__poster\" src=${imageUrl} alt=\"${title}\" loading=\"lazy\">\n    <div class=\"movie__info\">\n       <p class=\"movie__name\">${title}</p>\n      <div class=\"movie__data\">\n       <span class=\"movie__genre\">${filmsGenresList}</span>\n       <span class=\"movie__year\">${release_date.slice(0, 4)}</span>\n       <span class=\"movie__rating\">${vote_average.toFixed(1)}</span>\n       </div>\n       </div>\n       </div>\n       `;\n        }\n      )\n      .join('');\n  } else {\n    renderEmptyLibrary();\n  }\n}\n\nfunction getfilmsGenresUl(genreId) {\n  let filmsGenres = genres.reduce((acc, { id, name }) => {\n    if (genreId.includes(id)) {\n      acc.push(name);\n    }\n    return acc;\n  }, []);\n  if (filmsGenres.length > 3) {\n    filmsGenres = filmsGenres.slice(0, 2);\n    filmsGenres.push('Other');\n  }\n  return filmsGenres;\n}\n"],"names":["$eWCmQ","parcelRequire","$4579d646e857668e$var$libWatchedBtn","document","querySelector","$4579d646e857668e$var$libQueuedBtn","$4579d646e857668e$var$cards","$4579d646e857668e$var$currentLibrery","$4579d646e857668e$var$isLibreryNotEmpty","librery","localStorage","getItem","JSON","parse","length","$4579d646e857668e$var$onWatchedBtnClick","$4579d646e857668e$export$fa9ec8dc77941a73","classList","add","remove","$bTcpz","modal","$4579d646e857668e$var$renderEmptyLibrary","Notify","warning","$4579d646e857668e$var$onQueuedBtnClick","innerHTML","map","id","title","poster_path","genre_ids","vote_average","release_date","filmsGenresList","genreId","filmsGenres","$eRClg","genres","reduce","acc","name","includes","push","slice","$4579d646e857668e$var$getfilmsGenresUl","join","toFixed","window","addEventListener","$7Uk0D","fonNightDay"],"version":3,"file":"myLibrary.7d7bb5b1.js.map"}