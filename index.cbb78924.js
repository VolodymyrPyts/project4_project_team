function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=o),o("bTcpz"),o("bTcpz");var r=o("2shzp"),i=o("eRClg");o("2shzp");class s{set pageNumber(e){this.page=e}get pageNumber(){return this.page}get currentSearchQuery(){return this.searchQuery}set currentSearchQuery(e){this.searchQuery=e}async fetchGenres(){const e=`${this.baseUrl}genre/movie/list?api_key=${this.key}&language=${this.language}`;try{const t=await fetch(e);return await t.json()}catch(e){}}async fetchTrendingWeekFilmsByPage(){const e=`${this.baseUrl}trending/movie/week?api_key=${this.key}&language=${this.language}&page=${this.page}`,t=await fetch(e);return await t.json()}async fetchPopularFilmsByPage(){const e=`${this.baseUrl}movie/popular?api_key=${this.key}&language=${this.language}&page=${this.page}`,t=await fetch(e);return await t.json()}async fetchSearchFilms(){try{const e=await fetch(`${this.baseUrl}search/movie?api_key=${this.key}&language=${this.language}&page=${this.page}&include_adult=false&query=${this.searchQuery}`),t=await e.json();return await t}catch(e){}}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1,this.list="home",this.baseUrl="https://api.themoviedb.org/3/",this.language="en-US",this.key="f70abac86533d424df79b342ee8b9ff4"}}const c=e=>e.map((({id:e,title:t,poster_path:n,genre_ids:a,vote_average:o,release_date:r})=>{const i=S(a).join(", ");return`<div class="movie__card" id=${e}>\n    <img class="movie__poster" src="${n?`https://image.tmdb.org/t/p/w500${n}`:"https://placehold.jp/aaabb1/ffffff/395x574.png?text=This%20movie%20has%20no%20poster%20%3A("}" alt="${t}" loading="lazy">\n    <div class="movie__info">\n       <p class="movie__name">${L(t)}</p>\n      <div class="movie__data">\n       <span class="movie__genre">${i}</span>\n       <span class="movie__year">${r.slice(0,4)}</span>\n       <span class="movie__rating">${o.toFixed(1)}</span>\n       </div>\n       </div>\n       </div>\n       `})).join("");var l=o("eWCmQ");function u(){l.Loading.circle({svgColor:"#FF001B",svgSize:"90px",cssAnimation:!0}),document.querySelector("body").style.overflow="hidden"}function d(){setTimeout((()=>{l.Loading.remove(),document.querySelector("body").style.overflow="visible"}),300)}var p=o("bTcpz");const g=document.querySelector(".container-movie-card"),m=document.querySelector(".pagination__wrapper"),b=document.querySelector(".pagination__button--prev"),h=document.querySelector(".pagination__button--next");let y;const _=new s;function f(e,t=""){_.pageNumber=1,_.searchQuery=t,y=e,v(_.pageNumber-2,_.pageNumber+2),w()}function v(e,t){window.innerWidth>767&&y>=9?(e<3&&(e=3,t=7),t>=y&&(e=y-6,t=y-2)):(e<1&&(e=1,t=5),t>y&&(t=y,(e=y-4)<1&&(e=1))),window.innerWidth>767&&y<9&&(e=1,t=y);const n=[];window.innerWidth>767&&y>=9&&(n.push(`<button type="button" class="${1===_.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="1">1</button>`),e-1>2?n.push(`<button type="button" class="pagination__button" data-page="${e-3}">...</button>`):n.push(`<button type="button" class="${2===_.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="2">2</button>`),y-t==1&&(e--,t--));for(let a=e;a<=t;a++)n.push(`<button type="button" class="${a===_.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="${a}">${a}</button>`);window.innerWidth>767&&y>=9&&(y-t>2?n.push(`<button type="button" class="pagination__button" data-page="${t+3}">...</button>`):n.push(`<button type="button" class="${_.pageNumber===y-1?"pagination__button pagination__button--current":"pagination__button"}" data-page="${y-1}">${y-1}</button>`),n.push(`<button type="button" class="${_.pageNumber===y?"pagination__button pagination__button--current":"pagination__button"}" data-page="${y}">${y}</button>`)),m.innerHTML=n.join("")}function w(){1===_.pageNumber?b.setAttribute("disabled","true"):b.removeAttribute("disabled"),_.pageNumber===y?h.setAttribute("disabled","true"):h.removeAttribute("disabled")}async function $(){u(),_.searchQuery?await async function(){const{total_pages:e,results:t}=await _.fetchSearchFilms();y=e,localStorage.setItem("films-request-result",JSON.stringify(t)),g.innerHTML=c(t)}():await async function(){const{total_pages:e,results:t}=await _.fetchTrendingWeekFilmsByPage();y=e,localStorage.setItem("films-request-result",JSON.stringify(t)),g.innerHTML=c(t)}(),d(),(0,p.modal)(),v(_.pageNumber-2,_.pageNumber+2),w(),g.scrollIntoView()}b.addEventListener("click",(function(){_.pageNumber>1&&(_.pageNumber--,$())})),h.addEventListener("click",(function(){_.pageNumber<y&&(_.pageNumber++,$())})),m.addEventListener("click",(function(e){_.pageNumber=Number(e.target.dataset.page),$()})),window.addEventListener("resize",(()=>{v(_.pageNumber-2,_.pageNumber+2)}));p=o("bTcpz");const k=document.querySelector(".container-movie-card");function S(e){let t=i.genres.reduce(((t,{id:n,name:a})=>(e.includes(n)&&t.push(a),t)),[]);return t.length>3&&(t=t.slice(0,2),t.push("Other")),t}function L(e){return e.length>30?`${e.substring(0,30)} <span>...</span>`:e}(async function(){try{const{data:t}=await e(r).get("https://api.themoviedb.org/3//trending/movie/week?api_key=f70abac86533d424df79b342ee8b9ff4&page=1");return t}catch(e){console.error("ERROR")}})().then((e=>{!function(e){const t=e.results.map((({id:e,title:t,poster_path:n,genre_ids:a,vote_average:o,release_date:r})=>{const i=S(a).join(", ");return`<div class="movie__card" id=${e}>\n    <img class="movie__poster" src="${n?`https://image.tmdb.org/t/p/w500${n}`:"https://placehold.jp/aaabb1/ffffff/395x574.png?text=This%20movie%20has%20no%20poster%20%3A("}" alt="${t}" loading="lazy">\n    <div class="movie__info">\n       <p class="movie__name">${L(t)}</p>\n      <div class="movie__data">\n       <span class="movie__genre">${i}</span>\n       <span class="movie__year">${r.slice(0,4)}</span>\n       <span class="movie__rating">${o.toFixed(1)}</span>\n       </div>\n       </div>\n       </div>\n       `})).join("");k.insertAdjacentHTML("beforeend",t)}(e),f(e.total_pages),localStorage.setItem("films-request-result",JSON.stringify(e.results)),(0,p.modal)()}));p=o("bTcpz");o("2shzp");const q=new s,T={form:document.querySelector(".form"),markupMuvieForKeyword:document.querySelector(".container-movie-card"),boxError:document.querySelector(".cap__box-error")};document.querySelector(".container-movie-card");function N(){T.markupMuvieForKeyword.innerHTML=""}T.form.addEventListener("submit",(async function(e){if(e.preventDefault(),u(),q.searchQuery=e.currentTarget.elements.searchQuery.value.trim(),e.currentTarget.reset(),q.resetPage(),""===q.searchQuery)return T.boxError.classList.remove("is-hidden"),N(),d();try{const{total_pages:e,results:t}=await q.fetchSearchFilms();if(0===t.length)return d(),N(),T.boxError.classList.remove("is-hidden");N(),function(e){T.markupMuvieForKeyword.insertAdjacentHTML("beforeend",c(e))}(t),T.boxError.classList.add("is-hidden"),f(e,q.searchQuery),localStorage.setItem("films-request-result",JSON.stringify(t)),(0,p.modal)(),d()}catch(e){console.log(e.message),d()}}));const E={modal:document.querySelector(".modalTeams"),closeBtn:document.querySelector(".modalTeamClose"),openModalTeam:document.querySelectorAll(".modalTeamOpen")};function x(e){"Escape"===e.code&&B()}function M(){document.body.style.overflow="hidden",window.addEventListener("keydown",x),E.modal.classList.remove("is-hidden")}function B(){document.body.style.overflow="",window.removeEventListener("keydown",x),E.modal.classList.add("is-hidden")}E.openModalTeam.forEach((e=>{e.addEventListener("click",M)})),E.closeBtn.addEventListener("click",B),E.modal.addEventListener("click",(function(e){e.currentTarget===e.target&&B()}));var F=o("7Uk0D");const j=document.querySelector(".btn__to-register"),Q=document.querySelector(".form-login"),z=document.querySelector(".form__register"),U=document.querySelector(".singUp__form"),A=document.querySelector(".singUp__form-second");j.addEventListener("click",(()=>{Q.style.display="none",z.style.display="block"})),(0,F.fonNightDay)(),(()=>{const e={checkModalBtn:document.querySelector(".btn__form-login-check"),openModalBtn:document.querySelector(".btn__form-login"),closeModalBtn:document.querySelector(".modal-login__close-btn"),modal:document.querySelector(".modal__login"),modalBackdrop:document.querySelector(".bacekdrop_box")};function t(){Q.style.display="block",z.style.display="none",e.modal.classList.toggle("is-hidd"),e.modalBackdrop.classList.remove("bacekdrop")}e.checkModalBtn.style.display="none",e.openModalBtn.addEventListener("click",(function(){e.modal.classList.toggle("is-hidd"),e.modalBackdrop.classList.add("bacekdrop")})),e.closeModalBtn.addEventListener("click",t),U.addEventListener("submit",(n=>{n.preventDefault();const a=n.currentTarget.email.value.trim(),o=n.currentTarget.text.value.trim();""===a||""===o?alert("Fill in the field!"):(console.log("Email:",a),console.log("Key:",o),U.reset(),t(),alert("You have successfully logged into your account"),e.openModalBtn.style.display="none",e.checkModalBtn.style.display="block")})),A.addEventListener("submit",(e=>{e.preventDefault();const n=e.currentTarget.email.value.trim(),a=e.currentTarget.text.value.trim();""===n||""===a?alert("Fill in the field!"):(console.log("Email:",n),console.log("Key:",a),t(),alert("Registration was successful"))}))})(),u(),window.addEventListener("load",(()=>{d()}));
//# sourceMappingURL=index.cbb78924.js.map
