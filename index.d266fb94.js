function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=o),o("kyEFX").register(JSON.parse('{"5ZPII":"index.d266fb94.js","04aKt":"defaultImage.eb2c73c4.jpg","iL4dQ":"myLibrary.49cea2a9.js"}')),o("bTcpz"),o("bTcpz");var r=o("2shzp"),i=o("eRClg");o("2shzp");class s{set pageNumber(e){this.page=e}get pageNumber(){return this.page}get currentSearchQuery(){return this.searchQuery}set currentSearchQuery(e){this.searchQuery=e}async fetchGenres(){const e=`${this.baseUrl}genre/movie/list?api_key=${this.key}&language=${this.language}`;try{const t=await fetch(e);return await t.json()}catch(e){}}async fetchTrendingWeekFilmsByPage(){const e=`${this.baseUrl}trending/movie/week?api_key=${this.key}&language=${this.language}&page=${this.page}`,t=await fetch(e);return await t.json()}async fetchPopularFilmsByPage(){const e=`${this.baseUrl}movie/popular?api_key=${this.key}&language=${this.language}&page=${this.page}`,t=await fetch(e);return await t.json()}async fetchSearchFilms(){try{const e=await fetch(`${this.baseUrl}search/movie?api_key=${this.key}&language=${this.language}&page=${this.page}&include_adult=false&query=${this.searchQuery}`),t=await e.json();return await t}catch(e){}}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1,this.list="home",this.baseUrl="https://api.themoviedb.org/3/",this.language="en-US",this.key="f70abac86533d424df79b342ee8b9ff4"}}var c;c=new URL(o("kyEFX").resolve("04aKt"),import.meta.url).toString();const l=t=>t.map((({id:t,title:n,poster_path:a,genre_ids:o,vote_average:r,release_date:i})=>{const s=L(o).join(", ");return`<div class="movie__card" id=${t}>\n    <img class="movie__poster" src="${a?`https://image.tmdb.org/t/p/w500${a}`:e(c)}" alt="${n}" loading="lazy">\n    <div class="movie__info">\n       <p class="movie__name">${E(n)}</p>\n      <div class="movie__data">\n       <span class="movie__genre">${s}</span>\n       <span class="movie__year">${i.slice(0,4)}</span>\n       <span class="movie__rating">${r.toFixed(1)}</span>\n       </div>\n       </div>\n       </div>\n       `})).join("");var u=o("eWCmQ");function d(){u.Loading.circle({svgColor:"#FF001B",svgSize:"90px",cssAnimation:!0}),document.querySelector("body").style.overflow="hidden"}function p(){setTimeout((()=>{u.Loading.remove(),document.querySelector("body").style.overflow="visible"}),300)}var g=o("bTcpz");const m=document.querySelector(".container-movie-card"),b=document.querySelector(".pagination__wrapper"),_=document.querySelector(".pagination__button--prev"),y=document.querySelector(".pagination__button--next");let h;const f=new s;function v(e,t=""){f.pageNumber=1,f.searchQuery=t,h=e,w(f.pageNumber-2,f.pageNumber+2),$()}function w(e,t){window.innerWidth>767&&h>=9?(e<3&&(e=3,t=7),t>=h&&(e=h-6,t=h-2)):(e<1&&(e=1,t=5),t>h&&(t=h,(e=h-4)<1&&(e=1))),window.innerWidth>767&&h<9&&(e=1,t=h);const n=[];window.innerWidth>767&&h>=9&&(n.push(`<button type="button" class="${1===f.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="1">1</button>`),e-1>2?n.push(`<button type="button" class="pagination__button" data-page="${e-3}">...</button>`):n.push(`<button type="button" class="${2===f.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="2">2</button>`),h-t==1&&(e--,t--));for(let a=e;a<=t;a++)n.push(`<button type="button" class="${a===f.pageNumber?"pagination__button pagination__button--current":"pagination__button"}" data-page="${a}">${a}</button>`);window.innerWidth>767&&h>=9&&(h-t>2?n.push(`<button type="button" class="pagination__button" data-page="${t+3}">...</button>`):n.push(`<button type="button" class="${f.pageNumber===h-1?"pagination__button pagination__button--current":"pagination__button"}" data-page="${h-1}">${h-1}</button>`),n.push(`<button type="button" class="${f.pageNumber===h?"pagination__button pagination__button--current":"pagination__button"}" data-page="${h}">${h}</button>`)),b.innerHTML=n.join("")}function $(){1===f.pageNumber?_.setAttribute("disabled","true"):_.removeAttribute("disabled"),f.pageNumber===h?y.setAttribute("disabled","true"):y.removeAttribute("disabled")}async function k(){d(),f.searchQuery?await async function(){const{total_pages:e,results:t}=await f.fetchSearchFilms();h=e,localStorage.setItem("films-request-result",JSON.stringify(t)),m.innerHTML=l(t)}():await async function(){const{total_pages:e,results:t}=await f.fetchTrendingWeekFilmsByPage();h=e,localStorage.setItem("films-request-result",JSON.stringify(t)),m.innerHTML=l(t)}(),p(),(0,g.modal)(),w(f.pageNumber-2,f.pageNumber+2),$(),m.scrollIntoView()}_.addEventListener("click",(function(){f.pageNumber>1&&(f.pageNumber--,k())})),y.addEventListener("click",(function(){f.pageNumber<h&&(f.pageNumber++,k())})),b.addEventListener("click",(function(e){f.pageNumber=Number(e.target.dataset.page),k()})),window.addEventListener("resize",(()=>{w(f.pageNumber-2,f.pageNumber+2)}));g=o("bTcpz");const S=document.querySelector(".container-movie-card");function L(e){let t=i.genres.reduce(((t,{id:n,name:a})=>(e.includes(n)&&t.push(a),t)),[]);return t.length>3&&(t=t.slice(0,2),t.push("Other")),t}function E(e){return e.length>30?`${e.substring(0,30)} <span>...</span>`:e}(async function(){try{const{data:t}=await e(r).get("https://api.themoviedb.org/3//trending/movie/week?api_key=f70abac86533d424df79b342ee8b9ff4&page=1");return t}catch(e){console.error("ERROR")}})().then((t=>{!function(t){const n=t.results.map((({id:t,title:n,poster_path:a,genre_ids:o,vote_average:r,release_date:i})=>{const s=L(o).join(", ");return`<div class="movie__card" id=${t}>\n    <img class="movie__poster" src="${a?`https://image.tmdb.org/t/p/w500${a}`:e(c)}" alt="${n}" loading="lazy">\n    <div class="movie__info">\n       <p class="movie__name">${E(n)}</p>\n      <div class="movie__data">\n       <span class="movie__genre">${s}</span>\n       <span class="movie__year">${i.slice(0,4)}</span>\n       <span class="movie__rating">${r.toFixed(1)}</span>\n       </div>\n       </div>\n       </div>\n       `})).join("");S.insertAdjacentHTML("beforeend",n)}(t),v(t.total_pages),localStorage.setItem("films-request-result",JSON.stringify(t.results)),(0,g.modal)()}));g=o("bTcpz");o("2shzp");const q=new s,N={form:document.querySelector(".form"),markupMuvieForKeyword:document.querySelector(".container-movie-card"),boxError:document.querySelector(".cap__box-error")};document.querySelector(".container-movie-card");function T(){N.markupMuvieForKeyword.innerHTML=""}N.form.addEventListener("submit",(async function(e){if(e.preventDefault(),d(),q.searchQuery=e.currentTarget.elements.searchQuery.value.trim(),e.currentTarget.reset(),q.resetPage(),""===q.searchQuery)return N.boxError.classList.remove("is-hidden"),T(),p();try{const{total_pages:e,results:t}=await q.fetchSearchFilms();if(0===t.length)return p(),T(),N.boxError.classList.remove("is-hidden");T(),function(e){N.markupMuvieForKeyword.insertAdjacentHTML("beforeend",l(e))}(t),N.boxError.classList.add("is-hidden"),v(e,q.searchQuery),localStorage.setItem("films-request-result",JSON.stringify(t)),(0,g.modal)(),p()}catch(e){console.log(e.message),p()}}));const F={modal:document.querySelector(".modalTeams"),closeBtn:document.querySelector(".modalTeamClose"),openModalTeam:document.querySelectorAll(".modalTeamOpen")};function M(e){"Escape"===e.code&&B()}function x(){document.body.style.overflow="hidden",window.addEventListener("keydown",M),F.modal.classList.remove("is-hidden")}function B(){document.body.style.overflow="",window.removeEventListener("keydown",M),F.modal.classList.add("is-hidden")}F.openModalTeam.forEach((e=>{e.addEventListener("click",x)})),F.closeBtn.addEventListener("click",B),F.modal.addEventListener("click",(function(e){e.currentTarget===e.target&&B()}));var j=o("7Uk0D");const Q=document.querySelector(".btn__to-register"),z=document.querySelector(".form-login"),H=document.querySelector(".form__register"),U=document.querySelector(".singUp__form"),A=document.querySelector(".singUp__form-second");Q.addEventListener("click",(()=>{z.style.display="none",H.style.display="block"})),(0,j.fonNightDay)(),(()=>{const e={checkModalBtn:document.querySelector(".btn__form-login-check"),openModalBtn:document.querySelector(".btn__form-login"),closeModalBtn:document.querySelector(".modal-login__close-btn"),modal:document.querySelector(".modal__login"),modalBackdrop:document.querySelector(".bacekdrop_box")};function t(){z.style.display="block",H.style.display="none",e.modal.classList.toggle("is-hidd"),e.modalBackdrop.classList.remove("bacekdrop")}e.checkModalBtn.style.display="none",e.openModalBtn.addEventListener("click",(function(){e.modal.classList.toggle("is-hidd"),e.modalBackdrop.classList.add("bacekdrop")})),e.closeModalBtn.addEventListener("click",t),U.addEventListener("submit",(n=>{n.preventDefault();const a=n.currentTarget.email.value.trim(),o=n.currentTarget.text.value.trim();""===a||""===o?alert("Fill in the field!"):(console.log("Email:",a),console.log("Key:",o),U.reset(),t(),alert("You have successfully logged into your account"),e.openModalBtn.style.display="none",e.checkModalBtn.style.display="block")})),A.addEventListener("submit",(e=>{e.preventDefault();const n=e.currentTarget.email.value.trim(),a=e.currentTarget.text.value.trim();""===n||""===a?alert("Fill in the field!"):(console.log("Email:",n),console.log("Key:",a),t(),alert("Registration was successful"))}))})(),d(),window.addEventListener("load",(()=>{p()}));
//# sourceMappingURL=index.d266fb94.js.map
